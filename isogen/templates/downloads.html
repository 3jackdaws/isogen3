
{% include "components/head.html" %}

{% include "components/navigation.html" %}

<body>
    <section class="hero is-primary">
        <div class="hero-body">
            <div class="container">
                <h1 class="title">
                    Available Files
                </h1>
                <h2 class="subtitle">
                    Files you have access to
                </h2>
            </div>
        </div>
    </section>
    <div class="container" style="padding-top: 30px;">
        <div class="columns">
            <div class="column is-4">
                <div class="container">
                    <nav class="panel" style="background-color: white">
                        <p class="panel-heading">
                            Files
                        </p>
                        {% for file in files %}
                        <a class="panel-block tab-selector is-primary" onclick="activate(this); showTab(event, '{{ file.file.name }}')">
                            <span class="panel-icon">
                                <i class="fa fa-book"></i>
                            </span>
                            {{ file.file.name }}
                        </a>
                        {% endfor %}
                    </nav>
                </div>
            </div>

            <div class="column" style="">
                <div class="box is-fullwidth" >
                    {% for file in files %}
                    <div id="{{ file.file.name }}" class="tab" style="display: none; font-size: 16px;">
                        <div class="columns">
                            <div class="column">
                                <strong>FILE NAME: </strong><span class="is-primary">{{file.file.name}}</span>
                                <br>
                                <strong>FILE SIZE: </strong><span class="is-primary">{{file.hr_size }}</span>
                                <br>
                                <strong>RESTRICTED TO: </strong>
                                <span class="is-primary">
                                {% for user in file.members_allowed.all %}
                                <span class="tag is-primary is-outline">{{ user }}</span>
                                {% endfor %}
                                </span>
                            </div>

                            <div class="column is-narrow" >
                                <a class="button is-primary is-outlined" href="/get/{{file.id}}" download>DOWNLOAD</a>
                            </div>
                        </div>
                        <strong>DESCRIPTION:</strong>
                        <div class="content">
                            {{ file.description }}
                        </div>
                        <br>
                        <strong>CONTENTS:</strong>
                        {% if file.contents %}
                        <pre class="" style="word-wrap: break-word; overflow: wrap;">{{file.contents}}</pre>
                        {% else %}
                        This file type cannot be displayed.
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>

            </div>
        </div>
    </div>
    </div>
    {% include 'components/footer.html' %}
</body>
<script>
    function showTab(event, tabName){
        var tabs = document.getElementsByClassName('tab');
        for (var i = 0; i < tabs.length; i++) {
            tabs[i].style.display = "none";
        }
        document.getElementById(tabName).style.display = "block";
        console.log(document.getElementById(tabName));
    }

    function activate(item) {
        var selectors = document.getElementsByClassName('tab-selector');
        for (var i = 0; i < selectors.length; i++) {
            selectors[i].classList.remove("active");
        }
        item.classList.add("active");
    }
</script>


